<%@taglib prefix="jstl" uri="http://java.sun.com/jsp/jstl/core" %>
<jsp:useBean id="DDL" scope="page" class="BusinessLogic.Servlet_PopulateData" />
<link rel="stylesheet" type="text/css" href="css/your_style.css" />
<link rel="stylesheet" type="text/css" href="js/plugin/jqgrid/ui.multiselect.css" />

<section id="widget-grid" class="">
    <!--<input type="text" id="lblUserCode" value="<%= session.getAttribute("s_usercode")%>"  class="tboxreadonlyShort"/>-->
    <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
        <h1 class="page-title txt-color-blueDark">
            <!-- PAGE HEADER -->
            <i class="fa-fw fa fa-file fa-2x"></i> 
            Performance Report by Product                       
        </h1>
    </div>
    <div class="row">
        <form id='form_StkSales_Report'>
        <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div class="jarviswidget jarviswidget-color-blueDark" id="wid-id-2"  data-widget-editbutton="false" data-widget-colorbutton="false" data-widget-fullscreenbutton="false" data-widget-custombutton="false" data-widget-deletebutton="false">
                <header>
                    <span class="widget-icon"> <i class="fa fa-search"></i></span>
                    <span><h2>&nbsp;Generate Performance Report by Product</h2></span>
                </header>
                <div class="no-padding">
                    <div class="widget-body">
                        <div id="selectCriTab" class="tab-content">
                            <div class="tab-pane fade active in padding-5 no-padding-bottom" id="selectCriTab_s1">
                                <table id="tblSearch" class="selection-criteria">                                  
                                    <tr>
                                        <td width="15%">Date:</td>
                                        <td width="15%"><input id="txtDateFrom" name="txtDateFrom" placeholder="Select Date" class="searchbox-date"/></td>
                                        <td width="5%">To</td>
                                        <td width="65%"><input id="txtDateTo" name="txtDateTo" placeholder="Select Date" class="searchbox-date"/></td>
                                    </tr>                                            
                                    <tr>
                                        <td>Product:</td>
                                        <td>                                             
                                            <div style="float:left">
                                                <input type="text" id="txtStkFrom" name="txtStkFrom" placeholder="--Enter Product Code--" class="searchbox-text" style="width:255px;"/>
                                            </div>
                                            <div style="float:left;padding-left:2px">
                                                <button class='btn btn-default bg-color-blueDark txt-color-white' type="button" onclick="StkLookup('Stock','From');" ><i class="fa fa-search fa-lg"></i></button>
                                            </div>
                                        </td>
                                        <td>To</td>
                                        <td>                                             
                                            <div style="float:left">
                                                <input type="text" id="txtStkTo" name="txtStkTo" placeholder="--Enter Product Code--" class="searchbox-text" style="width:255px;"/>
                                            </div>
                                            <div style="float:left;padding-left:2px">
                                                <button class='btn btn-default bg-color-blueDark txt-color-white' type="button" onclick="StkLookup('Stock','To');" ><i class="fa fa-search fa-lg"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Product Type:</td>
                                        <td>                                            
                                            <div style="float:left">
                                                <input type="text" id="txtStkTypeFrom" name="txtStkTypeFrom" placeholder="--Enter Product Type Code--" class="searchbox-text" style="width:255px;"/>
                                            </div>
                                            <div style="float:left;padding-left:2px">
                                                <button class='btn btn-default bg-color-blueDark txt-color-white' type="button" onclick="StkLookup('StockType','From');" ><i class="fa fa-search fa-lg"></i></button>
                                            </div>
                                        </td>
                                        <td>To</td>
                                        <td>                                            
                                            <div style="float:left">
                                                <input type="text" id="txtStkTypeTo" name="txtStkTypeTo" placeholder="--Enter Product Type Code--" class="searchbox-text" style="width:255px;"/>
                                            </div>
                                            <div style="float:left;padding-left:2px">
                                                <button class='btn btn-default bg-color-blueDark txt-color-white' type="button" onclick="StkLookup('StockType','To');" ><i class="fa fa-search fa-lg"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Product Group:</td>
                                        <td>                                            
                                            <div style="float:left">
                                                <input type="text" id="txtStkGrpFrom" name="txtStkGrpFrom" placeholder="--Enter Product Group Code--" class="searchbox-text" style="width:255px;"/>
                                            </div>
                                            <div style="float:left;padding-left:2px">
                                                <button class='btn btn-default bg-color-blueDark txt-color-white' type="button" onclick="StkLookup('StockGroup','From');" ><i class="fa fa-search fa-lg"></i></button>
                                            </div>
                                        </td>
                                        <td>To</td>
                                        <td>                                            
                                            <div style="float:left">
                                                <input type="text" id="txtStkGrpTo" name="txtStkGrpTo" placeholder="--Enter Product Group Code--" class="searchbox-text" style="width:255px;"/>
                                            </div>
                                            <div style="float:left;padding-left:2px">
                                                <button class='btn btn-default bg-color-blueDark txt-color-white' type="button" onclick="StkLookup('StockGroup','To');" ><i class="fa fa-search fa-lg"></i></button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>    
                                        <th>Product Category</th>
                                        <td colspan="4">
                                            <div id="rdPrdCat">       
                                                <input type="radio" id="rdPrdCat1" name="rdPrdCat"  value="" checked="checked" /><label for="rdPrdCat1" class="label-option btn">All</label>
                                                <input type="radio" id="rdPrdCat2" name="rdPrdCat" value="0"/><label for="rdPrdCat2" class="label-option btn">Drug</label>
                                                <input type="radio" id="rdPrdCat3" name="rdPrdCat" value="1"/><label for="rdPrdCat3" class="label-option btn">Product</label>
                                                <input type="radio" id="rdPrdCat4" name="rdPrdCat" value="2"/><label for="rdPrdCat4" class="label-option btn">Consumable</label>
                                            </div>
                                        </td>
                                    </tr>    
                                    <tr>
                                        <td>Display By:</td>
                                        <td>                                            
                                            <select class="form-control" id="ddlDisplayBy" name="ddlDisplayBy" rel="popover-hover" style="width:300px;">
                                                <option value="">- Select Display By -</option> 
                                            </select>    
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>                            
        </article>
        </form>                             
    </div>
    <div class="row" style="padding-left:20px;padding-bottom:20px;">
        <div align="center" class="padding-5" >
            <input type="button" class="btn btn-default bg-color-blueDark txt-color-white" id="btnPrintPrev" name="btnPrintPrev" onclick="LoadPrintPreview();" data-toggle='modal' data-target='#printPreview' value="Print Preview" style="margin-right:20px;"/>
            <input type="button" class="btn btn-default bg-color-blueDark txt-color-white" id="btnCancel" name="btnCancel" onclick="location.href = '#/dashboard'" value="Cancel" style="margin-right:20px"/>
        </div>
    </div>
</section>
  <jsp:include page="../../../includes/loading-no-status.jsp"/>  
  <jsp:include page="../../../includes/PopUpInitPage.jsp"/>
  <script src="js/buttonset.js"></script>
<script type="text/javascript">
   
    pageSetUp();
    $('#rdPrdCat').buttonset();
    $('#rdReorderStatus').buttonset();

    function StkLookup(lookupType, ToFrom) {
        if (lookupType === 'Stock') {
            showProduct({width: 800, height: 600}).done(function (rowIn) {
                //alert(JSON.stringify(rowIn));
                $("#txtStk"+ToFrom).val(rowIn.stk_stockcode);
            });
        } 
        else if (lookupType === 'StockGroup') {
            showProductGrp({width: 800, height: 600}).done(function (rowIn) {
                $("#txtStkGrp"+ToFrom).val(rowIn.cd_cdcode);             
            });
        }
        else if (lookupType === 'StockType') {
            showProductType({width: 800, height: 600}).done(function (rowIn) {
                $("#txtStkType"+ToFrom).val(rowIn.cd_cdcode);
            });
        }
    }    

    $().ready(function(){
        
        for (var i=1;i<=10;i++) {
           $('#ddlDisplayBy').append("<option value='"+i+"'>Top "+i+"</option>");
        }
        
        loadScript("js/buttonset.js", function () {
            loadScript("js/excel-export.js", function () {
            });
        });           
        
        var tempDate = new Date();
        $("#txtDateFrom").datepicker({
            numberOfMonths: 2,
            changeMonth: true,
            changeYear: true,
            dateFormat: "yy-mm-dd",
            prevText: '<i class="fa fa-chevron-left"></i>',
            nextText: '<i class="fa fa-chevron-right"></i>',
            onSelect: function (selected) {
                $("#txtDateTo").datepicker("option", "minDate", selected);
            }
        });
        var fromDate = $.datepicker.formatDate('yy-mm-dd', new Date(tempDate.getFullYear(), tempDate.getMonth() - 4, tempDate.getDate()));
        //$("#txtDateFrom").val(fromDate);
        $("#txtDateTo").datepicker({
            numberOfMonths: 2,
            changeMonth: true,
            changeYear: true,
            dateFormat: "yy-mm-dd",
            prevText: '<i class="fa fa-chevron-left"></i>',
            nextText: '<i class="fa fa-chevron-right"></i>',
            onSelect: function (selected) {
                $("#txtDateFrom").datepicker("option", "maxDate", selected);
            }
        });
        $("#txtDateTo").datepicker("option", "minDate", fromDate);
        //$("#txtDateTo").val($.datepicker.formatDate('yy-mm-dd', tempDate));
        $("#txtDateFrom").datepicker("option", "maxDate", tempDate);
    });

    function LoadPrintPreview() {
        loadScript("js/print-preview.js", function () {
            var jObj = {              
            1: "GET_PRD_PERFORMANCE_LIST", 
            2: $('#txtDateFrom').val(),
            3: $('#txtDateTo').val(),
            4: $('#ddlDisplayBy').val(),
            5: $('#txtStkFrom').val(),
            6: $('#txtStkTo').val(),
            7: $('#txtStkGrpFrom').val(),
            8: $('#txtStkGrpTo').val(),
            9: $('#txtStkTypeFrom').val(),
            10: $('#txtStkTypeTo').val(),
            11: $('input[name=rdPrdCat]:checked').val()
        };   
            
        var param = {};                        
        var object = {};
            object.procParam = jObj;
            object.jasperName = 'Performance_Rpt_Prd';
            object.procString = 'SP_GET_PERFORMANCE_PRD_RPT(?,?,?,?,?,?,?,?,?,?,?)';
            object.fixParam = param;
            
            printToPage(object);                                           
        });      
    };
</script>
